"use strict";(self.webpackChunk_contentweaver_cms=self.webpackChunk_contentweaver_cms||[]).push([[8290],{83764:(X,T,s)=>{s.d(T,{C:()=>P});var e=s(43348),d=s(69093);const P={firstname:d.Yj().trim().required(e.iW.required),lastname:d.Yj(),email:d.Yj().email(e.iW.email).lowercase().required(e.iW.required),username:d.Yj().nullable(),password:d.Yj().min(8,e.iW.minLength).matches(/[a-z]/,"components.Input.error.contain.lowercase").matches(/[A-Z]/,"components.Input.error.contain.uppercase").matches(/\d/,"components.Input.error.contain.number"),confirmPassword:d.Yj().min(8,e.iW.minLength).oneOf([d.KR("password"),null],"components.Input.error.password.noMatch").when("password",(R,A)=>R?A.required(e.iW.required):A)}},88290:(X,T,s)=>{s.d(T,{ProfilePage:()=>ts});var e=s(58466),d=s(2730),P=s(45227),R=s(16113),A=s(65685),v=s(38973),E=s(12688),F=s(61680),N=s(18834),J=s(77271),V=s(15659),O=s(59979),p=s(9093),H=s(88663),L=s(13775),i=s(43348),b=s(81100),W=s(94475),j=s(67719),k=s(85209),q=s(15778),z=s(76024),C=s(96508),$=s(86784),B=s(69093),l=s(91155),ss=s(89142),es=s(83764),ps=s(79412),Ds=s(9361),us=s(95052),As=s(50682),vs=s(20153),Ls=s(34511),Cs=s(43900),Is=s(85041),xs=s(3891),Ts=s(90588),Rs=s(49382),Ws=s(12762),js=s(19292),Bs=s(9174),Us=s(6056),Ks=s(33854),ys=s(31075),ws=s(19727),Ss=s(8184),Ys=s(11001),Fs=s(81806),Ns=s(95431),Vs=s(55688),Hs=s(32962),zs=s(40060),$s=s(26208),Zs=s(31666),Qs=s(69506),Gs=s(3691),Xs=s(2119),Js=s(46705),bs=s(59362),ks=s(98907),qs=s(28685),se=s(45946),ee=s(6377),ae=s(71484),te=s(97755),oe=s(85960),re=s(25395),ne=s(35771),ie=s(50885),de=s(66451);const as=B.Ik().shape({...es.C,currentPassword:B.Yj().when(["password","confirmPassword"],(t,o,n)=>t||o?n.required(i.iW.required):n),preferedLanguage:B.Yj().nullable()}),ts=()=>{const t=(0,l.j)(M=>M.admin_app.language.localeNames),{formatMessage:o}=(0,C.A)(),{trackUsage:n}=(0,i.z1)(),a=(0,i.hN)(),{lockApp:g,unlockApp:r}=(0,i.MA)(),{notifyStatus:c}=(0,J.W)(),K=(0,l.j)(M=>M.admin_app.theme.currentTheme),D=(0,l.s)(),{_unstableFormatValidationErrors:y,_unstableFormatAPIError:f}=(0,i.wq)();(0,i.L4)();const{user:m}=(0,l.a)("ProfilePage");d.useEffect(()=>{m?c(o({id:"Settings.profile.form.notify.data.loaded",defaultMessage:"Your profile data has been loaded"})):a({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})},[o,c,a,m]);const[is,{isLoading:ds}]=(0,l.t)(),{isLoading:ls,data:_s,error:Q}=(0,l.v)(void 0,{skip:!(window.strapi.isEE&&window.strapi.features.isEnabled("sso"))});d.useEffect(()=>{Q&&a({type:"warning",message:{id:"Settings.permissions.users.sso.provider.error"}})},[Q,a]);const Es=async(M,{setErrors:w})=>{g();const{confirmPassword:S,currentTheme:u,...I}=M;let h=I;if(h.password===""){const{password:G,currentPassword:x,...Y}=h;h=Y}const _=await is(h);"data"in _&&(D((0,l.w)(u)),n("didChangeMode",{newMode:u}),a({type:"success",message:{id:"notification.success.saved",defaultMessage:"Saved"}})),"error"in _&&((0,l.x)(_.error)&&(_.error.name==="ValidationError"||_.error.message==="ValidationError")?w(y(_.error)):(0,l.x)(_.error)?a({type:"warning",message:f(_.error)}):a({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})),r?.()};if(ls)return(0,e.jsxs)(V.g,{"aria-busy":"true",children:[(0,e.jsx)(z.m,{title:o({id:"Settings.profile.form.section.helmet.title",defaultMessage:"User profile"})}),(0,e.jsx)(N.Q,{title:o({id:"Settings.profile.form.section.profile.page.title",defaultMessage:"Profile page"})}),(0,e.jsx)(F.s,{children:(0,e.jsx)(i.Bl,{})})]});const ms=_s?.isSSOLocked??!1,{email:cs,firstname:Ms,lastname:Ps,username:gs,preferedLanguage:fs}=m??{},hs={email:cs,firstname:Ms,lastname:Ps,username:gs,preferedLanguage:fs,currentTheme:K,confirmPassword:"",password:""};return(0,e.jsxs)(V.g,{"aria-busy":ds,children:[(0,e.jsx)(z.m,{title:o({id:"Settings.profile.form.section.helmet.title",defaultMessage:"User profile"})}),(0,e.jsx)(k.l1,{onSubmit:Es,initialValues:hs,validateOnChange:!1,validationSchema:as,enableReinitialize:!0,children:({errors:M,values:{email:w,firstname:S,lastname:u,username:I,preferedLanguage:h,currentTheme:_,...G},handleChange:x,isSubmitting:Y,dirty:Os})=>(0,e.jsxs)(i.lV,{children:[(0,e.jsx)(N.Q,{title:I||(0,ss.g)(S??"",u),primaryAction:(0,e.jsx)(R.$,{startIcon:(0,e.jsx)(b.A,{}),loading:Y,type:"submit",disabled:!Os,children:o({id:"global.save",defaultMessage:"Save"})})}),(0,e.jsx)(P.a,{paddingBottom:10,children:(0,e.jsx)(F.s,{children:(0,e.jsxs)(O.s,{direction:"column",alignItems:"stretch",gap:6,children:[(0,e.jsx)(ns,{errors:M,onChange:x,values:{firstname:S,lastname:u,username:I,email:w}}),!ms&&(0,e.jsx)(os,{errors:M,onChange:x,values:G}),(0,e.jsx)(rs,{onChange:x,values:{preferedLanguage:h,currentTheme:_},localeNames:t})]})})})]})})]})},os=({errors:t,onChange:o,values:n})=>{const{formatMessage:a}=(0,C.A)(),[g,r]=d.useState(!1),[c,K]=d.useState(!1),[D,y]=d.useState(!1);return(0,e.jsx)(P.a,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,children:(0,e.jsxs)(O.s,{direction:"column",alignItems:"stretch",gap:4,children:[(0,e.jsx)(L.o,{variant:"delta",as:"h2",children:a({id:"global.change-password",defaultMessage:"Change password"})}),(0,e.jsx)(v.x,{gap:5,children:(0,e.jsx)(E.E,{s:12,col:6,children:(0,e.jsx)(H.k,{error:t.currentPassword?a({id:t.currentPassword,defaultMessage:t.currentPassword}):"",onChange:o,value:n.currentPassword,label:a({id:"Auth.form.currentPassword.label",defaultMessage:"Current Password"}),name:"currentPassword",type:g?"text":"password",endAction:(0,e.jsx)(U,{onClick:f=>{f.stopPropagation(),r(m=>!m)},label:a(g?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"}),children:g?(0,e.jsx)(W.A,{}):(0,e.jsx)(j.A,{})})})})}),(0,e.jsxs)(v.x,{gap:5,children:[(0,e.jsx)(E.E,{s:12,col:6,children:(0,e.jsx)(Z,{error:t.password?a({id:t.password,defaultMessage:t.password}):"",onChange:o,value:n.password,label:a({id:"global.password",defaultMessage:"Password"}),name:"password",type:c?"text":"password",autoComplete:"new-password",endAction:(0,e.jsx)(U,{onClick:f=>{f.stopPropagation(),K(m=>!m)},label:a(c?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"}),children:c?(0,e.jsx)(W.A,{}):(0,e.jsx)(j.A,{})})})}),(0,e.jsx)(E.E,{s:12,col:6,children:(0,e.jsx)(Z,{error:t.confirmPassword?a({id:t.confirmPassword,defaultMessage:t.confirmPassword}):"",onChange:o,value:n.confirmPassword,label:a({id:"Auth.form.confirmPassword.label",defaultMessage:"Confirm Password"}),name:"confirmPassword",type:D?"text":"password",autoComplete:"new-password",endAction:(0,e.jsx)(U,{onClick:f=>{f.stopPropagation(),y(m=>!m)},label:a(D?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"}),children:D?(0,e.jsx)(W.A,{}):(0,e.jsx)(j.A,{})})})})]})]})})},Z=(0,$.Ay)(H.k)`
  ::-ms-reveal {
    display: none;
  }
`,U=(0,$.Ay)(A.T)`
  svg {
    height: ${(0,i.a8)(16)};
    width: ${(0,i.a8)(16)};
    path {
      fill: ${({theme:t})=>t.colors.neutral600};
    }
  }
`,rs=({onChange:t,values:o,localeNames:n})=>{const{formatMessage:a}=(0,C.A)(),g=(0,l.j)(r=>r.admin_app.theme.availableThemes);return(0,e.jsx)(P.a,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,children:(0,e.jsxs)(O.s,{direction:"column",alignItems:"stretch",gap:4,children:[(0,e.jsxs)(O.s,{direction:"column",alignItems:"stretch",gap:1,children:[(0,e.jsx)(L.o,{variant:"delta",as:"h2",children:a({id:"Settings.profile.form.section.experience.title",defaultMessage:"Experience"})}),(0,e.jsx)(L.o,{children:a({id:"Settings.profile.form.section.experience.interfaceLanguageHelp",defaultMessage:"Preference changes will apply only to you. More information is available {here}."},{here:(0,e.jsx)(P.a,{as:"a",color:"primary600",target:"_blank",rel:"noopener noreferrer",href:"https://docs.strapi.io/developer-docs/latest/development/admin-customization.html#locales",children:a({id:"Settings.profile.form.section.experience.here",defaultMessage:"here"})})})})]}),(0,e.jsxs)(v.x,{gap:5,children:[(0,e.jsx)(E.E,{s:12,col:6,children:(0,e.jsx)(p.Z,{label:a({id:"Settings.profile.form.section.experience.interfaceLanguage",defaultMessage:"Interface language"}),placeholder:a({id:"global.select",defaultMessage:"Select"}),hint:a({id:"Settings.profile.form.section.experience.interfaceLanguage.hint",defaultMessage:"This will only display your own interface in the chosen language."}),onClear:()=>{t({target:{name:"preferedLanguage",value:null}})},clearLabel:a({id:"Settings.profile.form.section.experience.clear.select",defaultMessage:"Clear the interface language selected"}),value:o.preferedLanguage,onChange:r=>{t({target:{name:"preferedLanguage",value:r}})},children:Object.entries(n).map(([r,c])=>(0,e.jsx)(p.eY,{value:r,children:c},r))})}),(0,e.jsx)(E.E,{s:12,col:6,children:(0,e.jsxs)(p.Z,{label:a({id:"Settings.profile.form.section.experience.mode.label",defaultMessage:"Interface mode"}),placeholder:a({id:"components.Select.placeholder",defaultMessage:"Select"}),hint:a({id:"Settings.profile.form.section.experience.mode.hint",defaultMessage:"Displays your interface in the chosen mode."}),value:o.currentTheme,onChange:r=>{t({target:{name:"currentTheme",value:r}})},children:[(0,e.jsx)(p.eY,{value:"system",children:a({id:"Settings.profile.form.section.experience.mode.option-system-label",defaultMessage:"Use system settings"})}),g.map(r=>(0,e.jsx)(p.eY,{value:r,children:a({id:"Settings.profile.form.section.experience.mode.option-label",defaultMessage:"{name} mode"},{name:a({id:r,defaultMessage:q(r)})})},r))]})})]})]})})},ns=({errors:t,onChange:o,values:n})=>{const{formatMessage:a}=(0,C.A)();return(0,e.jsx)(P.a,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,children:(0,e.jsxs)(O.s,{direction:"column",alignItems:"stretch",gap:4,children:[(0,e.jsx)(L.o,{variant:"delta",as:"h2",children:a({id:"global.profile",defaultMessage:"Profile"})}),(0,e.jsxs)(v.x,{gap:5,children:[(0,e.jsx)(E.E,{s:12,col:6,children:(0,e.jsx)(i.ah,{intlLabel:{id:"Auth.form.firstname.label",defaultMessage:"First name"},error:t.firstname,onChange:o,value:n.firstname,type:"text",name:"firstname",required:!0})}),(0,e.jsx)(E.E,{s:12,col:6,children:(0,e.jsx)(i.ah,{intlLabel:{id:"Auth.form.lastname.label",defaultMessage:"Last name"},error:t.lastname,onChange:o,value:n.lastname,type:"text",name:"lastname"})}),(0,e.jsx)(E.E,{s:12,col:6,children:(0,e.jsx)(i.ah,{intlLabel:{id:"Auth.form.email.label",defaultMessage:"Email"},error:t.email,onChange:o,value:n.email,type:"email",name:"email",required:!0})}),(0,e.jsx)(E.E,{s:12,col:6,children:(0,e.jsx)(i.ah,{intlLabel:{id:"Auth.form.username.label",defaultMessage:"Username"},error:t.username,onChange:o,value:n.username,type:"text",name:"username"})})]})]})})}}}]);
