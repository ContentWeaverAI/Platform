"use strict";(self.webpackChunk_MokoshAI_cms=self.webpackChunk_MokoshAI_cms||[]).push([[3266],{17260:(w,P,s)=>{s.d(P,{A:()=>a,S:()=>t});const t="strapi_stage",a="strapi_assignee"},18028:(w,P,s)=>{s.r(P),s.d(P,{InformationBoxEE:()=>Z});var t=s(58466),a=s(43348),e=s(91155),y=s(99955),O=s(95504),A=s(83063),c=s(73936),g=s(97215),L=s(59754),I=s(59979),N=s(9093),G=s(13775),F=s(96508),j=s(16141),o=s(17260),V=s(2730),m=s(54314),T=s(34778),Y=s(64820),Q=s(79412),$=s(9361),k=s(95052),b=s(50682),q=s(20153),ss=s(76024),ts=s(34511),as=s(85209),os=s(43900),ns=s(69093),es=s(85041),_s=s(3891),ls=s(90588),is=s(49382),Es=s(12762),rs=s(19292),ds=s(9174),Ms=s(6056),Ds=s(33854),Ps=s(31075),Os=s(19727),gs=s(8184),ms=s(11001),hs=s(15778),vs=s(81806),Cs=s(95431),As=s(55688),cs=s(32962),Is=s(40060),Ws=s(26208),Ls=s(31666),Ts=s(69506),Rs=s(3691),Bs=s(2119),fs=s(46705),Us=s(59362),Ks=s(98907),us=s(28685),ys=s(45946),js=s(6377),xs=s(71484),Ss=s(97755),ps=s(85960),ws=s(25395),Ns=s(35771);const H=()=>{const{initialData:_,layout:l,isSingleType:h,onChange:x}=(0,a.Cu)(),i=(0,e.j)(n=>n.admin_app.permissions),{formatMessage:E}=(0,F.A)(),{_unstableFormatAPIError:S}=(0,a.wq)(),p=(0,a.hN)(),{allowedActions:{canRead:R},isLoading:W}=(0,a.ec)(i.settings?.users),{data:v,isLoading:B,isError:f}=(0,e.k)({},{skip:W||!R}),r=v?.users||[],d=_?.[o.A]??null,[M,{error:U,isLoading:K}]=(0,j.u)(),u=async n=>{const D=await M({slug:h?"single-types":"collection-types",model:l.uid,id:_.id,data:{id:n?parseInt(n,10):null}});"data"in D&&(x?.({target:{type:"",name:o.A,value:D.data[o.A]}},!0),p({type:"success",message:{id:"content-manager.reviewWorkflows.assignee.notification.saved",defaultMessage:"Assignee updated"}}))};return(0,t.jsx)(A.D,{name:o.A,id:o.A,children:(0,t.jsx)(I.s,{direction:"column",gap:2,alignItems:"stretch",children:(0,t.jsx)(y.G3,{clearLabel:E({id:"content-manager.reviewWorkflows.assignee.clear",defaultMessage:"Clear assignee"}),error:(f&&R&&E({id:"content-manager.reviewWorkflows.assignee.error",defaultMessage:"An error occurred while fetching users"})||U&&S(U))??void 0,disabled:!W&&!B&&r.length===0,name:o.A,id:o.A,value:d?d.id.toString():null,onChange:u,onClear:()=>u(null),placeholder:E({id:"content-manager.reviewWorkflows.assignee.placeholder",defaultMessage:"Select \u2026"}),label:E({id:"content-manager.reviewWorkflows.assignee.label",defaultMessage:"Assignee"}),loading:B||W||K,children:r.map(n=>(0,t.jsx)(O.j,{value:n.id.toString(),textValue:(0,e.l)(n,E),children:(0,e.l)(n,E)},n.id))})})})},X=()=>{const{initialData:_,layout:l,isSingleType:h,onChange:x}=(0,a.Cu)(),{formatMessage:i}=(0,F.A)(),{_unstableFormatAPIError:E}=(0,a.wq)(),S=(0,a.hN)(),{data:p,isLoading:R}=(0,j.a)({slug:h?"single-types":"collection-types",model:l.uid,id:_.id},{skip:!_?.id||!l?.uid}),{meta:W,stages:v=[]}=p??{},{getFeature:B}=(0,e.m)(),[f,r]=V.useState(null),d=B("review-workflows")??{},M=_?.[o.S]??null,[U,{error:K}]=(0,j.b)(),u=async D=>{try{if(d?.[T.C]&&parseInt(d[T.C],10)<(W?.workflowCount??0))r("workflow");else if(d?.[T.a]&&parseInt(d[T.a],10)<v.length)r("stage");else if(_.id&&l){const C=await U({model:l.uid,id:_.id,slug:h?"single-types":"collection-types",data:{id:D}});"data"in C&&(x?.({target:{name:o.S,value:C.data[o.S],type:""}},!0),S({type:"success",message:{id:"content-manager.reviewWorkflows.stage.notification.saved",defaultMessage:"Review stage updated"}}))}}catch{}},{themeColorName:n}=(0,Y.g)(M?.color)??{};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A.D,{hint:v.length===0&&i({id:"content-manager.reviewWorkflows.stages.no-transition",defaultMessage:"You don\u2019t have the permission to update this stage."}),name:o.S,id:o.S,children:(0,t.jsxs)(I.s,{direction:"column",gap:2,alignItems:"stretch",children:[(0,t.jsx)(N.Z,{disabled:v.length===0,error:K&&E(K)||void 0,name:o.S,id:o.S,value:M?.id,onChange:u,label:i({id:"content-manager.reviewWorkflows.stage.label",defaultMessage:"Review stage"}),startIcon:M&&(0,t.jsx)(I.s,{as:"span",height:2,background:M?.color,borderColor:n==="neutral0"?"neutral150":void 0,hasRadius:!0,shrink:0,width:2,marginRight:"-3px"}),customizeContent:()=>(0,t.jsxs)(I.s,{as:"span",justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,t.jsx)(G.o,{textColor:"neutral800",ellipsis:!0,children:M?.name??""}),R?(0,t.jsx)(L.a,{small:!0,style:{display:"flex"},"data-testid":"loader"}):null]}),children:v.map(({id:D,color:C,name:z})=>{const{themeColorName:J}=(0,Y.g)(C)??{};return(0,t.jsx)(N.eY,{startIcon:(0,t.jsx)(I.s,{height:2,background:C,borderColor:J==="neutral0"?"neutral150":void 0,hasRadius:!0,shrink:0,width:2}),value:D,textValue:z,children:z},D)})}),(0,t.jsx)(c.o,{}),(0,t.jsx)(g.b,{})]})}),(0,t.jsxs)(m.L.Root,{isOpen:f==="workflow",onClose:()=>r(null),children:[(0,t.jsx)(m.L.Title,{children:i({id:"content-manager.reviewWorkflows.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})}),(0,t.jsx)(m.L.Body,{children:i({id:"content-manager.reviewWorkflows.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."})})]}),(0,t.jsxs)(m.L.Root,{isOpen:f==="stage",onClose:()=>r(null),children:[(0,t.jsx)(m.L.Title,{children:i({id:"content-manager.reviewWorkflows.stages.limit.title",defaultMessage:"You have reached the limit of stages for this workflow in your plan"})}),(0,t.jsx)(m.L.Body,{children:i({id:"content-manager.reviewWorkflows.stages.limit.body",defaultMessage:"Try deleting some stages or contact Sales to enable more stages."})})]})]})},Z=()=>{const{isCreatingEntry:_,layout:l}=(0,a.Cu)(),h=l?.options?.reviewWorkflows??!1;return(0,t.jsxs)(e.I.Root,{children:[(0,t.jsx)(e.I.Title,{}),h&&!_&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(X,{}),(0,t.jsx)(H,{})]}),(0,t.jsx)(e.I.Body,{})]})}},64820:(w,P,s)=>{s.d(P,{a:()=>y,g:()=>e});var t=s(25148),a=s(34778);function e(O){if(!O)return null;const c=Object.entries(t._.colors).filter(([,g])=>g.toUpperCase()===O.toUpperCase()).reduce((g,[L])=>(a.S?.[L]&&(g=L),g),null);return c?{themeColorName:c,name:a.S[c]}:null}function y(){return Object.entries(a.S).map(([O,A])=>({hex:t._.colors[O].toUpperCase(),name:A}))}}}]);
